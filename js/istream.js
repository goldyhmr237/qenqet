(function(e,t,n){var r=function(r,i){function y(e){e.find(u+", ."+l).find(a+":not([data-popupTrigger])").each(function(){var e=t(this);var r=e.find("div[data-popup]").eq(0);e.attr("data-popupTrigger","yes");var i="mfp-image";if(r.data("type")=="iframe"){i="mfp-iframe"}else if(r.data("type")=="inline"){i="mfp-inline"}else if(r.data("type")=="ajax"){i="mfp-ajax"}var s=e.find(".mb-open-popup");s.addBack(".mb-open-popup").attr("data-mfp-src",r.data("popup")).addClass(i);if(r.attr("title")!=n){s.attr("title",r.attr("title"))}})}function b(e,r){e.find(u).find(a+":not([data-imageconverted])").each(function(){var i=t(this);var s=i.find("div[data-thumbnail]").eq(0);var o=i.find("div[data-popup]").eq(0);var u=s.data("thumbnail");if(s[0]==n){s=o;u=o.data("popup")}if(r==false&&e.data("settings").waitForAllThumbsNoMatterWhat==false){if(s.data("width")==n&&s.data("height")==n){}else{return}}i.attr("data-imageconverted","yes");var a=s.attr("title");if(a==n){a=u}var f=t('<img title="'+a+'" src="'+u+'" />');if(r==true){f.attr("data-dont-wait-for-me","yes");s.addClass("image-with-dimensions");if(e.data("settings").waitUntilThumbLoads){f.hide()}}s.addClass("media-box-thumbnail-container").prepend(f)});if(r==true){function i(e){var r=t(e.img);var i=r.parents(".image-with-dimensions");if(i[0]==n){return}if(e.isLoaded){r.fadeIn(400,function(){i.removeClass("image-with-dimensions")})}else{i.removeClass("image-with-dimensions");r.hide();i.addClass("broken-image-here")}}e.find(".image-with-dimensions").imagesLoadedMB().always(function(e){for(index in e.images){var t=e.images[index];i(t)}}).progress(function(e,t){i(t)})}}function w(e){e.find(u).each(function(){var e=t(this);var r=e.find(a);var i=r.find("div[data-thumbnail]").eq(0);var s=r.find("div[data-popup]").eq(0);if(i[0]==n){i=s}var o=e.css("display");if(o=="none"){e.css("margin-top",99999999999999).show()}r.width(i.width());r.height(i.height());if(o=="none"){e.css("margin-top",0).hide()}})}function E(e){e.find(u).find(a).each(function(){var r=t(this);var i=r.find("div[data-thumbnail]").eq(0);var s=r.find("div[data-popup]").eq(0);if(i[0]==n){i=s}var o=parseFloat(i.data("width"));var a=parseFloat(i.data("height"));var f=r.parents(u).width()-e.data("settings").horizontalSpaceBetweenBoxes;var l=a*f/o;i.css("width",f);if(i.data("width")!=n||i.data("height")!=n){i.css("height",Math.floor(l))}})}function S(e,r,i){var s=e.find(u);var o;if(r=="auto"){o=Math.floor((e.width()-1)/i)}else{o=r}e.find(".media-boxes-grid-sizer").css("width",o);s.each(function(e){var r=t(this);var s=r.data("columns");if(s!=n&&parseInt(i)>=parseInt(s)){r.css("width",o*parseInt(s))}else{r.css("width",o)}})}function x(){var t=e,n="inner";if(!("innerWidth"in e)){n="client";t=document.documentElement||document.body}return{width:t[n+"Width"],height:t[n+"Height"]}}function T(e){var t=false;for(var n in e.data("settings").resolutions){var r=e.data("settings").resolutions[n];if(r.maxWidth>=x().width){S(e,r.columnWidth,r.columns);t=true;break}}if(t==false){S(e,e.data("settings").columnWidth,e.data("settings").columns)}}function N(e){var n=t('<div class="media-box-container"></div').css({"margin-left":e.data("settings").horizontalSpaceBetweenBoxes,"margin-bottom":e.data("settings").verticalSpaceBetweenBoxes});var r=e.find(u+":not([data-wrapper-added])").attr("data-wrapper-added","yes");r.wrapInner(n)}function C(e){if(e.data("settings").thumbnailOverlay==false)return;var r=e.find(u+":not([data-set-overlay-for-hover-effect])").attr("data-set-overlay-for-hover-effect","yes");r.find(".thumbnail-overlay").wrapInner("<div class='aligment'><div class='aligment'></div></div>");r.each(function(){var r=t(this);var i=r.find(a);var s=e.data("settings").overlayEffect;if(i.data("overlay-effect")!=n){s=i.data("overlay-effect")}if(s=="push-up"||s=="push-down"||s=="push-up-100%"||s=="push-down-100%"){var o=i.find(".media-box-thumbnail-container");var u=i.find(".thumbnail-overlay").css("position","relative");if(s=="push-up-100%"||s=="push-down-100%"){u.outerHeight(o.outerHeight())}var f=u.outerHeight();var l=t('<div class="wrapper-for-some-effects"></div');if(s=="push-up"||s=="push-up-100%"){u.appendTo(i)}else if(s=="push-down"||s=="push-down-100%"){u.prependTo(i);l.css("margin-top",-f)}i.wrapInner(l)}else if(s=="reveal-top"||s=="reveal-top-100%"){r.addClass("position-reveal-effect");var c=r.find(".thumbnail-overlay").css("top",0);if(s=="reveal-top-100%"){c.css("height","100%")}}else if(s=="reveal-bottom"||s=="reveal-bottom-100%"){r.addClass("position-reveal-effect").addClass("position-bottom-reveal-effect");var c=r.find(".thumbnail-overlay").css("bottom",0);if(s=="reveal-bottom-100%"){c.css("height","100%")}}else if(s.substr(0,9)=="direction"){r.find(".thumbnail-overlay").css("height","100%")}else if(s=="fade"){var h=r.find(".thumbnail-overlay").hide();h.css({height:"100%",top:"0",left:"0"})}})}function k(e){var r=e.find(u);r.each(function(){var r=t(this);var i=r.find(a);var s=e.data("settings").overlayEffect;if(i.data("overlay-effect")!=n){s=i.data("overlay-effect")}if(s.substr(0,9)=="direction"){i.find(".thumbnail-overlay").hide()}});e.isotopeMB("layout")}function L(){var e=o.find(u+", ."+l);var t=B();e.filter(t).removeClass("hidden-media-boxes-by-filter").addClass("visible-media-boxes-by-filter");e.not(t).addClass("hidden-media-boxes-by-filter").removeClass("visible-media-boxes-by-filter")}function A(e,t){o.addClass("filtering-isotope");h[t]=e;o.isotopeMB({filter:O(h)});L();if(D()){}else{if(H().length>0){F()}else{U()}}}function O(e){var t="";for(var n in e){var r=e[n];if(t==""){t=n}else if(t.split(",").length<r.split(",").length){t=n}}var i=e[t];for(var n in e){if(n==t)continue;var s=e[n].split(",");for(var o=0;o<s.length;o++){var u=i.split(",");var a=[];for(var f=0;f<u.length;f++){if(u[f]=="*"&&s[o]=="*"){s[o]=""}else{if(s[o]=="*"){s[o]=""}if(u[f]=="*"){u[f]=""}}a.push(u[f]+s[o])}i=a.join(",")}}return i}function M(e){if(e==n)return;o.find(s.searchTarget).each(function(){var n=t(this);var r=n.parents("."+f+", ."+l);if(n.text().toLowerCase().indexOf(e.toLowerCase())!==-1){r.addClass("search-match")}else{r.removeClass("search-match")}});setTimeout(function(){A(".search-match","search")},100)}function _(e){var t=e.data("sort-ascending");if(t==n){t=true}if(e.data("sort-toggle")&&e.data("sort-toggle")==true){e.data("sort-ascending",!t)}return t}function D(){var e=P().length;if(e<s.minBoxesPerFilter&&j().length>0){z(s.minBoxesPerFilter-e);return true}return false}function P(){var e=o.find(u);var t=B();if(t!="*"){e=e.filter(t)}return e}function H(){var e=P().not(".media-box-loaded");return e}function B(){var e=o.data("isotopeMB").options.filter;if(e==""||e==n){e="*"}return e}function j(e){var t=o.find("."+l);var r=B();if(r!="*"&&e==n){t=t.filter(r)}return t}function F(){p.html(s.LoadingWord);p.removeClass("media-boxes-load-more");p.addClass("media-boxes-loading")}function q(){I++;F()}function R(){I--;if(I==0){U()}}function U(){p.removeClass("media-boxes-load-more");p.removeClass("media-boxes-loading");p.removeClass("media-boxes-no-more-entries");if(j().length>0){p.html(s.loadMoreWord);p.addClass("media-boxes-load-more")}else{p.html(s.noMoreEntriesWord);p.addClass("media-boxes-no-more-entries")}}function z(e,n){if(p.hasClass("media-boxes-load-more")==false){return}q();var r=[];j(n).each(function(n){var i=t(this);if(n+1<=e){i.removeClass(l).addClass(f);i.hide();r.push(this)}});o.isotopeMB("insert",t(r),function(){R()})}function W(e){if(e.attr("data-stop")!=n){e.hide();e.removeAttr("data-stop")}}var s=t.extend({},t.fn.mediaBoxes.defaults,i);var o=t(r).addClass("media-boxes-container");var u=".media-box";var a=".media-box-image";var f="media-box";var l="media-box-hidden";var c=Modernizr.csstransitions?"transition":"animate";var h={};if(s.overlayEasing=="default"){s.overlayEasing=c=="transition"?"_default":"swing"}var p=t('<div class="media-boxes-load-more media-boxes-load-more-button"></div>').insertAfter(o);s.resolutions.sort(function(e,t){return e.maxWidth-t.maxWidth});o.data("settings",s);o.css({"margin-left":-s.horizontalSpaceBetweenBoxes});o.find(u).removeClass(f).addClass(l);var d=t(s.filterContainer);d.each(function(){var e=t(this);var r=e.find(s.filter).filter(".selected").attr("data-filter");var i="filter";if(e.data("id")!=n){i=e.data("id")}h[i]=r});M(t(s.search).val());var v=t(s.sortContainer).find(s.sort).filter(".selected");var m=v.attr("data-sort-by");var g=_(v);o.append('<div class="media-boxes-grid-sizer"></div>');o.isotopeMB({itemSelector:u,filter:O(h),masonry:{columnWidth:".media-boxes-grid-sizer"},getSortData:s.getSortData,sortBy:m,sortAscending:g});L();t.extend(IsotopeMB.prototype,{resize:function(){var e=t(this.element);T(e);E(e);w(e);k(e);if(!this.isResizeBound||!this.needsResizeLayout()){return}this.layout()}});t.extend(IsotopeMB.prototype,{_setContainerMeasure:function(e,r){if(e===n){return}var i=this.size;if(i.isBorderBox){e+=r?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth}e=Math.max(e,0);this.element.style[r?"width":"height"]=e+"px";var s=t(this.element);t.waypoints("refresh");s.addClass("lazy-load-ready");s.removeClass("filtering-isotope")}});t.extend(IsotopeMB.prototype,{insert:function(e,r){var i=this.addItems(e);if(!i.length){return}var o=t(this.element);var a=o.find("."+l)[0];var f,c;var h=i.length;for(f=0;f<h;f++){c=i[f];if(a!=n){this.element.insertBefore(c.element,a)}else{this.element.appendChild(c.element)}}var p=function(){var e=this._filter(i);this._noTransition(function(){this.hide(e)});for(f=0;f<h;f++){i[f].isLayoutInstant=true}this.arrange();for(f=0;f<h;f++){delete i[f].isLayoutInstant}this.reveal(e)};var d=function(e){var n=t(e.img);var r=n.parents("div[data-thumbnail], div[data-popup]");if(e.isLoaded==false){n.hide();r.addClass("broken-image-here")}};var v=this;N(o);T(o);E(o);y(o);b(o,false);o.find("img:not([data-dont-wait-for-me])").imagesLoadedMB().always(function(){if(s.waitForAllThumbsNoMatterWhat==false){b(o,true)}o.find(u).addClass("media-box-loaded");p.call(v);w(o);C(o);if(typeof r==="function"){r()}for(index in v.images){var e=v.images[index];d(e)}}).progress(function(e,t){d(t)})}});d.find(s.filter).on("click",function(){var e=t(this);var r=e.parents(s.filterContainer);r.find(s.filter).removeClass("selected");e.addClass("selected");var i=e.attr("data-filter");var o="filter";if(r.data("id")!=n){o=r.data("id")}A(i,o);return false});t(s.search).on("keyup",function(){var e=t(this).val();M(e)});t(s.sortContainer).find(s.sort).on("click",function(){var e=t(this);e.parents(s.sortContainer).find(s.sort).removeClass("selected");e.addClass("selected");var n=e.attr("data-sort-by");o.isotopeMB({sortBy:n,sortAscending:_(e)});return false});var I=0;z(s.boxesToLoadStart,true);p.on("click",function(){z(s.boxesToLoad)});if(s.lazyLoad){o.waypoint(function(e){if(o.hasClass("lazy-load-ready")){if(e=="down"&&o.hasClass("filtering-isotope")==false){o.removeClass("lazy-load-ready");z(s.boxesToLoad)}}},{context:e,continuous:true,enabled:true,horizontal:false,offset:"bottom-in-view",triggerOnce:false})}o.on("mouseenter.hoverdir, mouseleave.hoverdir",a,function(e){if(s.thumbnailOverlay==false)return;var r=t(this);var i=s.overlayEffect;if(r.data("overlay-effect")!=n){i=r.data("overlay-effect")}var o=e.type;var u=r.find(".media-box-thumbnail-container");var a=r.find(".thumbnail-overlay");var f=a.outerHeight();if(i=="push-up"||i=="push-up-100%"){var l=r.find("div.wrapper-for-some-effects");if(o==="mouseenter"){l.stop().show()[c]({"margin-top":-f},s.overlaySpeed,s.overlayEasing)}else{l.stop()[c]({"margin-top":0},s.overlaySpeed,s.overlayEasing)}}else if(i=="push-down"||i=="push-down-100%"){var l=r.find("div.wrapper-for-some-effects");if(o==="mouseenter"){l.stop().show()[c]({"margin-top":0},s.overlaySpeed,s.overlayEasing)}else{l.stop()[c]({"margin-top":-f},s.overlaySpeed,s.overlayEasing)}}else if(i=="reveal-top"||i=="reveal-top-100%"){if(o==="mouseenter"){u.stop().show()[c]({"margin-top":f},s.overlaySpeed,s.overlayEasing)}else{u.stop()[c]({"margin-top":0},s.overlaySpeed,s.overlayEasing)}}else if(i=="reveal-bottom"||i=="reveal-bottom-100%"){if(o==="mouseenter"){u.stop().show()[c]({"margin-top":-f},s.overlaySpeed,s.overlayEasing)}else{u.stop()[c]({"margin-top":0},s.overlaySpeed,s.overlayEasing)}}else if(i.substr(0,9)=="direction"){var h=X(r,{x:e.pageX,y:e.pageY});if(i=="direction-top"){h=0}else if(i=="direction-bottom"){h=2}else if(i=="direction-right"){h=1}else if(i=="direction-left"){h=3}var p=V(h,r);if(o=="mouseenter"){a.css({left:p.from,top:p.to});a.stop().show().fadeTo(0,1,function(){t(this).stop()[c]({left:0,top:0},s.overlaySpeed,s.overlayEasing)})}else{if(i=="direction-aware-fade"){a.fadeOut(700)}else{a.stop()[c]({left:p.from,top:p.to},s.overlaySpeed,s.overlayEasing)}}}else if(i=="fade"){if(o=="mouseenter"){a.stop().fadeOut(0);a.fadeIn(s.overlaySpeed)}else{a.stop().fadeIn(0);a.fadeOut(s.overlaySpeed)}var d=a.find(".fa");if(o=="mouseenter"){d.css({scale:1.4});d[c]({scale:1},200)}else{d.css({scale:1});d[c]({scale:1.4},200)}}});var X=function(e,t){var n=e.width(),r=e.height(),i=(t.x-e.offset().left-n/2)*(n>r?r/n:1),s=(t.y-e.offset().top-r/2)*(r>n?n/r:1),o=Math.round((Math.atan2(s,i)*(180/Math.PI)+180)/90+3)%4;return o};var V=function(e,t){var n,r;switch(e){case 0:if(!s.reverse){n=0,r=-t.height()}else{n=0,r=-t.height()}break;case 1:if(!s.reverse){n=t.width(),r=0}else{n=-t.width(),r=0}break;case 2:if(!s.reverse){n=0,r=t.height()}else{n=0,r=-t.height()}break;case 3:if(!s.reverse){n=-t.width(),r=0}else{n=t.width(),r=0}break}return{from:n,to:r}};var J=".mb-open-popup[data-mfp-src]";if(s.considerFilteringInPopup){J=u+":not(.hidden-media-boxes-by-filter) .mb-open-popup[data-mfp-src], ."+l+":not(.hidden-media-boxes-by-filter) .mb-open-popup[data-mfp-src]"}if(s.showOnlyLoadedBoxesInPopup){J=u+":visible .mb-open-popup[data-mfp-src]"}o.magnificPopup({delegate:J,type:"image",removalDelay:200,closeOnContentClick:false,alignTop:s.alignTop,preload:s.preload,mainClass:"my-mfp-slide-bottom",gallery:{enabled:s.gallery},closeMarkup:'<button title="%title%" class="mfp-close"></button>',titleSrc:"title",iframe:{patterns:{youtube:{index:"youtube.com/",id:"v=",src:"https://www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"https://player.vimeo.com/video/%id%?autoplay=1"}},markup:'<div class="mfp-iframe-scaler">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe>'+'<div class="mfp-bottom-bar" style="margin-top:4px;"><div class="mfp-title"></div><div class="mfp-counter"></div></div>'+"</div>"},callbacks:{change:function(){var e=t(this.currItem.el);setTimeout(function(){if(e.attr("title")!=n){t(".mfp-title").html(e.attr("title"))}else{t(".mfp-title").html("")}},5);if(s.deepLinking){location.hash="#!"+e.attr("data-mfp-src")+"||"+e.parents(".media-boxes-container").attr("id")}},beforeOpen:function(){this.container.data("scrollTop",parseInt(t(e).scrollTop()))},open:function(){t("html, body").scrollTop(this.container.data("scrollTop"))},close:function(){if(s.deepLinking){e.location.hash="#!"}}}});if(s.deepLinking){function K(){if(location.hash.substr(0,2)!="#!"){return null}var e=location.href.split("#!")[1];var t=e.split("||")[1];var n=e.split("||")[0];return{hash:e,id:t,src:n}}var Q=K();if(Q){o.filter('[id="'+Q.id+'"]').find('.mb-open-popup[data-mfp-src="'+Q.src+'"]').trigger("click")}function G(){var e=t.magnificPopup.instance;if(!e){return}var n=K();if(!n&&e.isOpen){e.close()}else if(n){if(e.isOpen&&e.currItem&&e.currItem.el.parents(".media-boxes-container").attr("id")==n.id){if(e.currItem.el.attr("data-mfp-src")!=n.src){var r=null;t.each(e.items,function(e,i){var s=i.parsed?i.el:t(i);if(s.attr("data-mfp-src")==n.src){r=e;return false}});if(r!==null){e.goTo(r)}}else{}}else{o.filter('[id="'+n.id+'"]').find('.mb-open-popup[data-mfp-src="'+n.src+'"]').trigger("click")}}}if(e.addEventListener){e.addEventListener("hashchange",G,false)}else if(e.attachEvent){e.attachEvent("onhashchange",G)}}return this};var i="i";var s="n";var o="f";var u="o";var a=".";var f=Math.floor(Math.random()*11);var l="p";var c="h";var h=false;var p="p";if(l!=p){return}var d="?";var v="i";if(o==u){var m=d+v}var g="d";var y="=";t.fn.mediaBoxes=function(e){return this.each(function(n,i){var s=t(this);if(s.data("mediaBoxes"))return s.data("mediaBoxes");var o=new r(this,e);s.data("mediaBoxes",o)})};t.fn.mediaBoxes=function(e){return this.each(function(n,i){var s=t(this);if(s.data("mediaBoxes"))return s.data("mediaBoxes");var o=new r(this,e);s.data("mediaBoxes",o)})};t.fn.mediaBoxes.defaults={boxesToLoadStart:8,boxesToLoad:4,minBoxesPerFilter:0,lazyLoad:true,horizontalSpaceBetweenBoxes:15,verticalSpaceBetweenBoxes:15,columnWidth:"auto",columns:4,resolutions:[{maxWidth:1300,columnWidth:"auto",columns:3},{maxWidth:1080,columnWidth:"auto",columns:2},{maxWidth:520,columnWidth:"auto",columns:1}],filterContainer:"#filter",filter:"a",search:"",searchTarget:".media-box-title,.media-box-text",sortContainer:"",sort:"a",getSortData:{title:".media-box-title",text:".media-box-text"},waitUntilThumbLoads:true,waitForAllThumbsNoMatterWhat:false,thumbnailOverlay:true,overlayEffect:"fade",overlaySpeed:200,overlayEasing:"default",showOnlyLoadedBoxesInPopup:false,considerFilteringInPopup:true,deepLinking:false,gallery:false,LoadingWord:"Loading...",loadMoreWord:"Load More",noMoreEntriesWord:"No More Entries",alignTop:false,preload:[0,2]};(function(){function e(e){function i(){n.hide()}function s(){n.show()}function o(){var e=n.children(".selected");var t=e.length?e:n.children().first();r.html(t.clone().find("a").append('<span class="icicon-sortdesc"></span>').end().html())}function u(e){e.preventDefault();t(this).parents("li").siblings("li").removeClass("selected").end().addClass("selected");o()}var n=e.find(".media-boxes-drop-down-menu");var r=e.find(".media-boxes-drop-down-header");o();r.bind("mouseout blur",i).bind("mouseover focus",s);n.find("> li > *").bind("mouseout blur",i).bind("mouseover focus",s).bind("click",u);r.on("click","a",function(e){e.preventDefault();return false})}t(".media-boxes-drop-down").each(function(){e(t(this))})})()})(window,tQuery)